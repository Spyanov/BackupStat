<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>


    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">

        // Load the Visualization API and the corechart package.
        google.charts.load('current', {'packages':['corechart']});

        </script>


    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>


        </head>
<body>

<div id="app">
    <canvas id="myChart" width="800" height="200"></canvas>
</div>

    <script src="https://unpkg.com/vue"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>


    <script type="text/javascript">
        var app = new Vue({
            el: '#app',
            data: {
                arrJson:[],
                snapshot: [],
                resultRegistry:'',
            },
            mounted(){
                this.loading()

            },
            methods:{
                loading:function loading(){
                    var i = 0




                    axios.get("http://localhost:4000/").then( response =>{
                        var snapshots = response.data;
                        console.log("snapshots=", snapshots)

                        for (key in snapshots) {
                            i++
                        }

                        console.log("i=",i)


                        var lb=[];

                        var l2 = [];

                        for (let j=0; j<i; j++){

                            lb.push(snapshots[j].size)
                            console.log(snapshots[j].size)

                            l2.push(snapshots[j].hash+"["+snapshots[j].dir_name+"] <strong>test</strong>")
                        }


                        var ctx = document.getElementById('myChart');



                        console.log("lb=", lb)

                        var myChart = new Chart(ctx, {
                                type: 'bar',
                                data:{
                                labels: l2,
                                datasets: [{
                                    label: 'Size',
                                    data: lb,
                                    backgroundColor: '#0048ff',
                                    borderColor: '#000',
                                    borderWidth: 1
                                }]
                            },
                            options: {
                                scales: {
                                    yAxes: [{
                                        ticks: {
                                            beginAtZero: true
                                        }
                                    }],
                                },
                                responsive : false
                            }
                        });





                        function drawVisualization() {
                            // Create and populate the data table.
                            var addData = []
                            addData.push(["hash", "size"])
                            for (let j = 0; j < snapshots.length; j++) {
                                addData.push([snapshots[j].hash, snapshots[j].size])
                            }

                            console.log("addData = ", addData)

                            google.charts.load('current', {'packages':['corechart']});
                            google.charts.setOnLoadCallback(drawChart);

                            function drawChart() {
                                var data = google.visualization.arrayToDataTable(addData);

                                var options = {
                                    title: 'Даты и заказы',
                                    hAxis: {title: 'Year',  titleTextStyle: {color: '#333'}},
                                    vAxis: {minValue: 0}
                                };

                                var chart = new google.visualization.AreaChart(document.getElementById('myChart'));
                                chart.draw(data, options);
                            }
                        };


                        drawVisualization()

                    })


                }

            }
        })






    </script>

<div id="chart"></div>

    <script>


    </script>


</body>

</html>